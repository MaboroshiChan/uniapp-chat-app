(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/popup/popup"], { "3b51": function (t, e, n) { "use strict"; (function (t, e) { var i = n("4ea4"); n("8122"); i(n("66fd")); var o = i(n("5cc5")); t.__webpack_require_UNI_MP_PLUGIN__ = n, e(o.default) }).call(this, n("bc2e")["default"], n("543d")["createPage"]) }, 4518: function (t, e, n) { "use strict"; n.r(e); var i = n("94cc"), o = n.n(i); for (var a in i) ["default"].indexOf(a) < 0 && function (t) { n.d(e, t, (function () { return i[t] })) }(a); e["default"] = o.a }, "5cc5": function (t, e, n) { "use strict"; n.r(e); var i = n("9e0b"), o = n("4518"); for (var a in o) ["default"].indexOf(a) < 0 && function (t) { n.d(e, t, (function () { return o[t] })) }(a); n("e710"); var c = n("f0c5"), s = Object(c["a"])(o["default"], i["b"], i["c"], !1, null, null, null, !1, i["a"], void 0); e["default"] = s.exports }, "94cc": function (t, e, n) { "use strict"; (function (t) { var i = n("4ea4"); Object.defineProperty(e, "__esModule", { value: !0 }), e.default = void 0; var o = i(n("e9db")), a = { data: function () { return { type: "center", value: "", xiugai: "", inputValue: "", list: [], image: "", scrollHeight: 0, now: "", tablist: [{ value: "哈哈" }, { value: "你好" }] } }, computed: { windowObj: function () { var e; return t.getSystemInfo({ success: function (t) { e = t } }), e } }, mounted: function () { this.initChatLog(), this.connectSocket() }, onLoad: function () { }, methods: { todel: function (e) { var n = this; t.showModal({ title: "注意", content: "请问是否删除", success: function (t) { t.confirm ? (console.log("用户点击确定"), n.tablist.splice(e, 1)) : t.cancel && console.log("用户点击取消") } }) }, toadd: function () { this.tablist.push({ value: "请编辑名字" }) }, toxiugai: function (t) { this.xiugai = t, this.$refs.inputDialog.open() }, dialogInputConfirm: function (e) { var n = this; t.showLoading({ title: "修改中" }), setTimeout((function () { t.hideLoading(), console.log(e), n.value = e, n.tablist[n.xiugai].value = e, n.$refs.inputDialog.close() }), 1e3) }, change: function (t) { console.log("当前模式：" + t.type + ",状态：" + t.show) }, toggle: function (t) { this.type = t, this.$refs.popup.open(t) }, todel2: function (e) { var n = this; t.showModal({ title: "注意", content: "请问是否删除", success: function (t) { t.confirm ? (console.log("用户点击确定"), n.list.splice(e, 1)) : t.cancel && console.log("用户点击取消") } }) }, tapTo: function (e) { switch (e) { case 1: this.image = "https://nimg.ws.126.net/?url=http%3A%2F%2Fdingyue.ws.126.net%2F2021%2F0826%2F6def4faej00qygdfw009kd200u001hcg00u001hc.jpg&thumbnail=660x2147483647&quality=80&type=jpg", this.newsSend(2); break; case 2: this.newsSend(1); break; case 3: var n = []; this.list.forEach((function (t, e) { 2 === t.type && n.push(t.content) })), t.previewImage({ urls: n, css: "background-position: center;background-size:contain;" }); break; default: break } }, getInput: function (t) { this.inputValue = t.detail.value }, newsSend: function (e) { var n = this; this.now = o.default.getDate(), console.log(this.now); var i = { type: "say", message_type: e, fromid: 1, toid: 2, data: 2 !== e ? this.inputValue : this.image, fromname: "自己的用户名", toname: "对方的用户名", isMe: !0 }; t.sendSocketMessage({ data: JSON.stringify(i), complete: function (t) { Object.defineProperty(i, "content", Object.getOwnPropertyDescriptor(i, "data")), i["type"] = e, i["time"] = n.now, i["avatar"] = "https://nimg.ws.126.net/?url=http%3A%2F%2Fdingyue.ws.126.net%2F2021%2F0826%2F6def4faej00qygdfw009kd200u001hcg00u001hc.jpg&thumbnail=660x2147483647&quality=80&type=jpg", delete i["data"], n.list = n.list.concat([i]), n.inputValue = "" } }), this.setScrollTop() }, newsSend1: function (e) { var n = this; this.now = o.default.getDate(), console.log(this.now); var i = { type: "say", message_type: e, fromid: 1, toid: 2, data: this.inputValue, fromname: "自己的用户名", toname: "对方的用户名", isMe: !1 }; t.sendSocketMessage({ data: JSON.stringify(i), complete: function (t) { Object.defineProperty(i, "content", Object.getOwnPropertyDescriptor(i, "data")), i["type"] = 1, i["time"] = n.now, i["avatar"] = "/static/logo.png", delete i["data"], n.list = n.list.concat([i]), n.inputValue = "" } }), this.setScrollTop() }, initChatLog: function () { var t = this; setTimeout((function () { t.list = [{ avatar: "/static/logo.png", isMe: !1, content: "欢迎进入......", type: 1, time: "2023-05-10 16:20:46" }] }), 500) }, connectSocket: function () { var e = this; e.data, e.userInfo; t.connectSocket({ url: "wss://*******/wss:8282" }), t.onSocketOpen((function (t) { })), t.onSocketMessage((function (n) { var i = JSON.parse(n.data); switch (i["type"]) { case "init": t.sendSocketMessage({ data: JSON.stringify({ type: "bind", fromid: 2 }), complete: function (t) { } }); break; case "text": i["isMe"] = !1, i["type"] = i.message_type, e.list = e.list.concat([i]), e.setScrollTop(); break } })) }, setScrollTop: function () { var e = this; this.$nextTick((function () { var n = t.createSelectorQuery().select(".scroll-view"); n.fields({ size: !0 }, (function (t) { var n = t.height; e.scrollHeight = n })).exec() })) } } }; e.default = a }).call(this, n("543d")["default"]) }, "9e0b": function (t, e, n) { "use strict"; n.d(e, "b", (function () { return o })), n.d(e, "c", (function () { return a })), n.d(e, "a", (function () { return i })); var i = { uniPopup: function () { return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null, "da34")) }, uniPopupDialog: function () { return Promise.all([n.e("common/vendor"), n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null, "6816")) } }, o = function () { var t = this.$createElement; this._self._c }, a = [] }, d81a: function (t, e, n) { }, e710: function (t, e, n) { "use strict"; var i = n("d81a"), o = n.n(i); o.a } }, [["3b51", "common/runtime", "common/vendor"]]]);